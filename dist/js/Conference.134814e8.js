(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Conference","VoteDetailWindow"],{"07cf":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"conference_schedule"},[this.proposalList.length?s("div",[s("div",{staticClass:"topic"},[t._v("議程")]),s("div",{staticClass:"schedule_list"},[t._m(0),t._m(1),t._m(2),s("div",{staticClass:"schedule_block"},[s("h4",{staticClass:"schedule_block__title"},[t._v("四、議案與討論事項")]),s("div",{staticClass:"schedule_block__detail"},t._l(t.proposalList,(function(e,o){return s("div",{key:e.proposalID,staticClass:"case"},[s("router-link",{staticClass:"case__number",attrs:{to:{name:"detail",params:{proposalID:e.id}},tag:"div"}},[t._v("第"+t._s(t.convertNumber(o+1))+"案 ")]),s("div",{staticClass:"case__proposer"},[t._v(t._s(e.dept))])],1)})),0)]),t._m(3),t._m(4),t._m(5)])]):s("div",[s("p",[t._v("查無此會議")]),s("router-link",{staticClass:"btn",attrs:{to:{name:"home"},tag:"span"}},[t._v("回到首頁")])],1)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"schedule_block"},[s("h4",{staticClass:"schedule_block__title"},[t._v("一、正式開會")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"schedule_block"},[s("h4",{staticClass:"schedule_block__title"},[t._v("二、主席報告")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"schedule_block"},[s("h4",{staticClass:"schedule_block__title"},[t._v("三、行政報告")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"schedule_block"},[s("h4",{staticClass:"schedule_block__title"},[t._v("五、臨時動議")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"schedule_block"},[s("h4",{staticClass:"schedule_block__title"},[t._v("六、聲明與補述")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"schedule_block"},[s("h4",{staticClass:"schedule_block__title"},[t._v("七、散會")])])}],i=s("5530"),a=(s("96cf"),s("1da1")),r=s("3761"),c=s("2f62"),l={name:"ConferenceSchedule",components:{},data:function(){return{proposalList:[]}},created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.setLodingStatus(!0),t.next=3,this.getProposal(this.$route.params.delibrationID);case 3:this.setLodingStatus(!1);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(c["b"])(["setLodingStatus"])),Object(c["b"])({setDelibrationInfo:"delibration/setDelibrationInfo"})),{},{getProposal:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(r["b"])(t);case 2:o=s.sent,0===o.data.length&&e.setDelibrationInfo({semester:0,period:0,name:"無此會議"}),e.proposalList=o.data;case 5:case"end":return s.stop()}}),s)})))()},convertNumber:function(t){return["一","二","三","四","五","六","七","八","九","十"][t-1]}})},u=l,d=(s("3b03"),s("2877")),v=Object(d["a"])(u,o,n,!1,null,"20abf39c",null);e["default"]=v.exports},1148:function(t,e,s){"use strict";var o=s("a691"),n=s("1d80");t.exports="".repeat||function(t){var e=String(n(this)),s="",i=o(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(s+=e);return s}},"23be":function(t,e,s){"use strict";var o=s("7442"),n=s.n(o);n.a},3761:function(t,e,s){"use strict";s.d(e,"b",(function(){return n})),s.d(e,"a",(function(){return i})),s.d(e,"e",(function(){return a})),s.d(e,"c",(function(){return r})),s.d(e,"f",(function(){return c})),s.d(e,"d",(function(){return l}));var o=s("cda8"),n=function(t){return Object(o["a"])({url:"proposal/"+t,method:"get"})},i=function(t,e){return Object(o["a"])({url:"proposal/"+t+"/"+e,method:"get"})},a=function(t,e,s,n){return Object(o["a"])({url:"proposal/vote",data:{proposalID:t,studentID:e,result:s,isAmendment:n},method:"post"})},r=function(t,e){return Object(o["a"])({url:"proposal/isVoted",data:{proposalID:t,isAmendment:e},method:"post"})},c=function(t,e){return Object(o["a"])({url:"proposal/voteResults",data:{proposalID:t,isAmendment:e},method:"post"})},l=function(t,e){return Object(o["a"])({url:"proposal/saveEditProposals",data:{delibrationID:t,proposal:e},method:"put"})}},"3b03":function(t,e,s){"use strict";var o=s("452c"),n=s.n(o);n.a},"408a":function(t,e,s){var o=s("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=o(t))throw TypeError("Incorrect invocation");return+t}},"423c":function(t,e,s){},"452c":function(t,e,s){},"496f":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"conference_detail"},[t.isProposalEmpty?s("div",[s("p",[t._v("查無此會議")]),s("router-link",{staticClass:"btn",attrs:{to:{name:"home"},tag:"span"}},[t._v("回到首頁")])],1):s("div",[t._m(0),s("table",{staticClass:"detail_table"},[s("tr",{staticClass:"case_info"},[s("td",{staticClass:"title",attrs:{width:"25px"}},[t._v("案次")]),s("td",{staticClass:"title_data"},[t._v("第一案")]),s("td",{staticClass:"title",attrs:{width:"50px"}},[t._v("提案單位")]),s("td",{staticClass:"title_data"},[t._v(t._s(t.proposal.dept)+" "+t._s(t.proposal.name))])]),s("tr",{staticClass:"case_summary"},[s("td",{staticClass:"title"},[t._v("案由")]),s("td",{attrs:{colspan:"3",align:"left"}},[t._v(t._s(t.proposal.reason))])]),s("tr",{staticClass:"case_description"},[s("td",{staticClass:"title"},[t._v("說明")]),s("td",{attrs:{colspan:"3",align:"left"}},t._l(t.proposal.description,(function(e,o){return s("a",{key:o,attrs:{href:e,target:"_blank"}},[t._v(t._s(e))])})),0)]),s("tr",[s("td",{staticClass:"title"},[t._v("討論")]),s("td",{attrs:{colspan:"3",align:"left"}},[t._v(t._s(t.proposal.discussion))])])]),s("VoteWindow",{directives:[{name:"show",rawName:"v-show",value:t.votingInfo.isVoting&&t.showVoteWindow,expression:"votingInfo.isVoting && showVoteWindow"}],on:{vote:t.vote}}),t.isLeader?s("LeaderVoteWindow",{directives:[{name:"show",rawName:"v-show",value:t.showLeaderVoteWindow,expression:"showLeaderVoteWindow"}]}):t._e(),s("div",{staticClass:"toggle_btns"},[t.isLeader?s("div",{staticClass:"toggle_btns__leader",class:{is_open:t.showLeaderVoteWindow},on:{click:t.toggleLeaderWindow}},[t._v("操作")]):t._e(),s("div",{staticClass:"toggle_btns__vote",class:{is_open:t.votingInfo.isVoting&&t.showVoteWindow},on:{click:t.toggleVoteWindow}},[t._v("投票")]),s("div",{staticClass:"toggle_btns__vote",class:{is_open:t.showResultWindow},on:{click:t.toggleResultWindow}},[t._v("結果")])])],1),t.showResultWindow?s("VoteDetailWindow"):t._e()],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"schedule_block"},[s("h3",{staticClass:"schedule_block__title"},[t._v("四、議案與討論事項")])])}],i=(s("b64b"),s("96cf"),s("1da1")),a=s("5530"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vote_window"},[s("h3",{staticClass:"vote_topic"},[t._v("第一案 "+t._s("resolution"===t.votingInfo.votingType?"決議":"臨時動議")+"投票")]),s("div",{staticClass:"vote_block"},[s("button",{staticClass:"vote_button ",class:[null===t.vote||1===t.vote?"agree_vote":"no_vote"],attrs:{disabled:t.vote},on:{click:function(e){return t.handleClick(1)}}},[t._v("同意")]),s("button",{staticClass:"vote_button ",class:[null===t.vote||2===t.vote?"against_vote":"no_vote"],attrs:{disabled:t.vote},on:{click:function(e){return t.handleClick(2)}}},[t._v("反對")]),s("button",{staticClass:"vote_button ",class:[null===t.vote||3===t.vote?"null_vote":"no_vote"],attrs:{disabled:t.vote},on:{click:function(e){return t.handleClick(3)}}},[t._v("廢票")])])])},c=[],l=s("2f62"),u=s("3761"),d={name:"VoteWindow",data:function(){return{vote:null}},computed:Object(a["a"])({},Object(l["c"])(["votingInfo"])),created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["c"])(t.$route.params.proposalID,0);case 2:s=e.sent,s.data.result&&(t.vote=s.data.result);case 4:case"end":return e.stop()}}),e)})))()},methods:{handleClick:function(t){this.vote||(this.vote=t,this.$emit("vote",t))}}},v=d,_=(s("23be"),s("2877")),p=Object(_["a"])(v,r,c,!1,null,null,null),h=p.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"leader_vote_window"},[s("h3",{staticClass:"vote_topic"},[t._v(" 第一案 "+t._s("resolution"===t.votingInfo.votingType?"決議":"臨時動議")+"操作 ")]),s("div",{staticClass:"vote_block"},[t.votingInfo.isVoting?s("button",{staticClass:"vote_button finish",on:{click:t.closeVote}},[t._v("結束"),s("br"),t._v("投票")]):s("button",{staticClass:"vote_button start",on:{click:t.createVote}},[t._v("開放"),s("br"),t._v("投票")]),s("button",{staticClass:"vote_button",on:{click:t.toggleManipulation}},[t._v(" 切至"),s("br"),t._v(" "+t._s("resolution"===t.votingInfo.votingType?"動議":"決議")+" ")]),s("button",{staticClass:"vote_button"},[t._v("撤案")])])])},b=[],m={name:"LeaderVoteWindow",data:function(){return{}},computed:Object(a["a"])({},Object(l["c"])(["votingInfo"])),methods:Object(a["a"])(Object(a["a"])({},Object(l["b"])({setErrorWindow:"error/setErrorWindow",setVotingStatus:"setVotingStatus"})),{},{createVote:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{"resolution"===t.votingInfo.votingType?t.$socket.emit("startResolution",{proposalID:t.$route.params.proposalID}):t.$socket.emit("startAmendment",{proposalID:t.$route.params.proposalID})}catch(s){console.warn(s)}case 1:case"end":return e.stop()}}),e)})))()},closeVote:function(){"resolution"===this.votingInfo.votingType?this.$socket.emit("closeResolution",{proposalID:this.$route.params.proposalID}):this.$socket.emit("closeAmendment",{proposalID:this.$route.params.proposalID})},toggleManipulation:function(){this.votingInfo.isVoting?this.setErrorWindow({showError:!0,errorType:"cantChangeManipulation"}):"resolution"===this.votingInfo.votingType?this.setVotingStatus({votingType:"amendment"}):this.setVotingStatus({votingType:"resolution"})}})},g=m,w=(s("f30b"),Object(_["a"])(g,f,b,!1,null,"596baa8b",null)),C=w.exports,k=s("a76e"),j={name:"ConferenceDetail",components:{VoteWindow:h,LeaderVoteWindow:C,VoteDetailWindow:k["default"]},data:function(){return{proposal:{},showVoteWindow:!1,showLeaderVoteWindow:!1,showResultWindow:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(l["c"])({isLeader:function(t){return t.user.isLeader},votingInfo:"votingInfo"})),{},{isProposalEmpty:function(){return 0===Object.keys(this.proposal).length}}),created:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.setLodingStatus(!0),t.next=3,this.getProposalDetail(this.$route.params.delibrationID,this.$route.params.proposalID);case 3:this.setLodingStatus(!1),this.$socket.emit("entryVote",{proposalID:this.$route.params.proposalID});case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:Object(a["a"])(Object(a["a"])({},Object(l["b"])({setErrorWindow:"error/setErrorWindow",setLodingStatus:"setLodingStatus"})),{},{getProposalDetail:function(t,e){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Object(u["a"])(t,e);case 2:n=o.sent,s.proposal=n.data;case 4:case"end":return o.stop()}}),o)})))()},vote:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(u["e"])(e.proposal.id,"H34066000",t,0);case 2:o=s.sent,console.log(o);case 4:case"end":return s.stop()}}),s)})))()},toggleLeaderWindow:function(){!this.showLeaderVoteWindow&&this.showVoteWindow&&(this.showVoteWindow=!1),this.showLeaderVoteWindow=!this.showLeaderVoteWindow},toggleVoteWindow:function(){this.votingInfo.isVoting?(this.showVoteWindow=!this.showVoteWindow,this.showLeaderVoteWindow&&(this.showLeaderVoteWindow=!1)):this.setErrorWindow({showError:!0,errorType:"cantVote"})},toggleResultWindow:function(){this.showResultWindow=!this.showResultWindow}})},O=j,V=(s("4e3c"),Object(_["a"])(O,o,n,!1,null,null,null));e["default"]=V.exports},"4e3c":function(t,e,s){"use strict";var o=s("627b"),n=s.n(o);n.a},"627b":function(t,e,s){},7442:function(t,e,s){},a76e:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vote_detail_window"},[t._m(0),s("div",{staticClass:"vote_result"},[s("div",{staticClass:"vote_result__item"},[s("h5",[t._v(t._s(t.voteResult.agree)+"票")]),s("p",[t._v(t._s(t.percent.agree)+"%")])]),s("div",{staticClass:"vote_result__item"},[s("h5",[t._v(t._s(t.voteResult.disagree)+"票")]),s("p",[t._v(t._s(t.percent.disagree)+"%")])]),s("div",{staticClass:"vote_result__item"},[s("h5",[t._v(t._s(t.voteResult.spoil)+"票")]),s("p",[t._v(t._s(t.percent.spoil)+"%")])])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vote_block"},[s("div",{staticClass:"vote_button agree_vote"},[t._v("同意")]),s("div",{staticClass:"vote_button against_vote"},[t._v("反對")]),s("div",{staticClass:"vote_button null_vote"},[t._v("廢票")])])}],i=(s("b680"),s("96cf"),s("1da1")),a=s("3761"),r={name:"VoteDetailWindow",data:function(){return{voteResult:{}}},created:function(){this.getVoteResults(4)},methods:{getVoteResults:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["f"])(t.$route.params.proposalID,0);case 2:s=e.sent,console.log(s.data),t.voteResult=s.data;case 5:case"end":return e.stop()}}),e)})))()}},computed:{percent:function(){var t=this.voteResult.agree+this.voteResult.disagree+this.voteResult.spoil;return{agree:(this.voteResult.agree/t*100).toFixed(1),disagree:(this.voteResult.disagree/t*100).toFixed(1),spoil:(this.voteResult.spoil/t*100).toFixed(1)}}}},c=r,l=(s("c319"),s("2877")),u=Object(l["a"])(c,o,n,!1,null,null,null);e["default"]=u.exports},b444:function(t,e,s){},b680:function(t,e,s){"use strict";var o=s("23e7"),n=s("a691"),i=s("408a"),a=s("1148"),r=s("d039"),c=1..toFixed,l=Math.floor,u=function(t,e,s){return 0===e?s:e%2===1?u(t,e-1,s*t):u(t*t,e/2,s)},d=function(t){var e=0,s=t;while(s>=4096)e+=12,s/=4096;while(s>=2)e+=1,s/=2;return e},v=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){c.call({})}));o({target:"Number",proto:!0,forced:v},{toFixed:function(t){var e,s,o,r,c=i(this),v=n(t),_=[0,0,0,0,0,0],p="",h="0",f=function(t,e){var s=-1,o=e;while(++s<6)o+=t*_[s],_[s]=o%1e7,o=l(o/1e7)},b=function(t){var e=6,s=0;while(--e>=0)s+=_[e],_[e]=l(s/t),s=s%t*1e7},m=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==_[t]){var s=String(_[t]);e=""===e?s:e+a.call("0",7-s.length)+s}return e};if(v<0||v>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(p="-",c=-c),c>1e-21)if(e=d(c*u(2,69,1))-69,s=e<0?c*u(2,-e,1):c/u(2,e,1),s*=4503599627370496,e=52-e,e>0){f(0,s),o=v;while(o>=7)f(1e7,0),o-=7;f(u(10,o,1),0),o=e-1;while(o>=23)b(1<<23),o-=23;b(1<<o),f(1,1),b(2),h=m()}else f(0,s),f(1<<-e,0),h=m()+a.call("0",v);return v>0?(r=h.length,h=p+(r<=v?"0."+a.call("0",v-r)+h:h.slice(0,r-v)+"."+h.slice(r-v))):h=p+h,h}})},b721:function(t,e,s){},c319:function(t,e,s){"use strict";var o=s("b721"),n=s.n(o);n.a},d641:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"conference_choose"},[s("p",[t._v("請 選 擇 會 議")]),s("div",{staticClass:"conference_list"},t._l(t.delibrations,(function(e){return s("div",{key:e.id,staticClass:"conference_item",on:{click:function(s){return t.joinDelibration(e)}}},[s("div",{staticClass:"item_block"},[s("h3",{staticClass:"item_block__session"},[t._v(t._s(e.semester)+"學年度第"+t._s(t.convertNumber(e.period))+"會期")]),s("h2",{staticClass:"item_block__name"},[t._v(t._s(e.dName))]),s("div",{staticClass:"item_block__time"},[t._v(t._s(t.convertTimeString(e.startTime))+" 開放登入")])]),s("p",{staticClass:"item_authority"},[t._v("權限："+t._s(e.position))])])})),0)])},n=[],i=s("5530"),a=s("a18c"),r=s("2f62"),c={name:"ConferenceChoose",components:{},data:function(){return{}},computed:Object(i["a"])({},Object(r["c"])("delibration",["delibrations"])),methods:Object(i["a"])(Object(i["a"])({},Object(r["b"])({setDelibrationInfo:"delibration/setDelibrationInfo"})),{},{convertNumber:function(t){return["一","二","三","四","五","六","七","八","九","十"][t-1]},convertTimeString:function(t){return new Date(t).toLocaleString()},joinDelibration:function(t){var e=t.id,s=t.semester,o=t.period,n=t.dName;this.setDelibrationInfo({semester:s,period:o,name:n}),a["a"].push({name:"schedule",params:{delibrationID:e}})}})},l=c,u=(s("f27a"),s("2877")),d=Object(u["a"])(l,o,n,!1,null,"4ee5d499",null);e["default"]=d.exports},f27a:function(t,e,s){"use strict";var o=s("b444"),n=s.n(o);n.a},f30b:function(t,e,s){"use strict";var o=s("423c"),n=s.n(o);n.a}}]);
//# sourceMappingURL=Conference.134814e8.js.map